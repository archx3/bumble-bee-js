var Barge=Barge||{};
(function(g,h,k){Barge.Event=Barge.Event||{};Barge.Event.getEvent=function(a){return window.event?window.event:a};Barge.Event.getEventTarget=function(a){a=Barge.Event.getEvent(a);return a.target?a.target:a.srcElement};Barge.Event.EventElement=function(a){this.element=a;this.events={}};Barge.Event.EventElement.prototype.addEvent=function(a,d,c,b){a&&(a.addEventListener?a.addEventListener(d,c,b||!1):a.attachEvent?a.attachEvent("on"+d,c):a["on"+d]=c)};Barge.Event.EventElement.prototype.removeEvent=function(a,
d,c,b){a.removeEventListener?a.removeEventListener(d,c,void 0===b?!1:b):a.detachEvent?a.detachEvent("on"+d,c):a["on"+d]=null};Barge.Event.EventElement.prototype.bind=function(a,d,c){c=void 0===c?!1:c;g.defined(this.events[a])||(this.events[a]=[]);this.events[a].push(d);this.addEvent(this.element,a,d,c)};Barge.Event.EventElement.prototype.unbind=function(a,d,c){c=void 0===c?!1:c;var b=g.defined(d);a in this.events&&(this.events[a]=this.events[a].filter(function(e){if(b&&e!==d)return!0;this.removeEvent(this.element,
a,e,c);return!1},this))};Barge.Event.EventElement.prototype.unbindAll=function(){for(var a in this.events)this.unbind(a)};Barge.Event.EventManager=function(){this.EventElements=[]};Barge.Event.EventManager.prototype.getEvent=function(a){return Barge.Event.getEvent(a)};Barge.Event.EventManager.prototype.getEventTarget=function(a){a=this.getEvent(a);return Barge.Event.getEventTarget(a)};Barge.Event.EventManager.prototype.EventElement=function(a,d){var c=this.EventElements.filter(function(b){return Barge.Event.EventElement.element===
a})[0];g.defined(c)||(c=new Barge.Event.EventElement(a),this.EventElements.push(c));return{evEl:c,eventCount:d||null}};Barge.Event.EventManager.prototype.bind=function(a,d,c,b){b=void 0===b?!1:b;this.EventElement(a).evEl.bind(d,c,b)};Barge.Event.EventManager.prototype.longClick=function(a,d,c,b,e){c=void 0===c?600:c;b=void 0===b?!1:b;e=void 0===e?!1:e;var f=null;g.isArrayLike(a)?b?(this.bindOnceOnAll(a,"mousedown",function(a){f=setTimeout(function(){clearTimeout(f);d()},c)},e),this.bindOnceOnAll(a,
"mouseup",function(a){clearTimeout(f)},e)):(this.bindOnAll(a,"mousedown",function(a){f=setTimeout(function(){clearTimeout(f);d()},c)},e),this.bindOnAll(a,"mouseup",function(a){clearTimeout(f)},e)):b?(this.bindOnce(a,"mousedown",function(a){f=setTimeout(function(){clearTimeout(f);d()},c)},e),this.bindOnce(a,"mouseup",function(a){clearTimeout(f)},e)):(this.bind(a,"mousedown",function(a){f=setTimeout(function(){clearTimeout(f);d()},c)},e),this.bind(a,"mouseup",function(a){clearTimeout(f)},e))};Barge.Event.EventManager.prototype.bindOnAll=
function(a,d,c,b){b=void 0===b?!1:b;if(g.isArray(a)||g.isArrayLike(a)){var e=this;h.forEach(a,function(a){e.bind(a,d,c,b)})}};Barge.Event.EventManager.prototype.unbind=function(a,d,c,b){b=void 0===b?!1:b;this.EventElement(a).evEl.unbind(d,c,b)};Barge.Event.EventManager.prototype.unbindOnAll=function(a,d,c,b){b=void 0===b?!1:b;var e=this;h.forEach(a,function(a){e.unbind(a,d,c,b)})};Barge.Event.EventManager.prototype.unbindAll=function(){for(var a=0;a<this.EventElements.length;a++)this.EventElements[a].unbindAll()};
Barge.Event.EventManager.prototype.bindOnce=function(a,d,c,b){b=void 0===b?!1:b;var e=this.EventElement(a).evEl,f=function(a){c(a);e.unbind(d,f,b)};e.bind(d,f,b)};Barge.Event.EventManager.prototype.bindOnceOnAll=function(a,d,c,b){b=void 0===b?!1:b;if(g.isArray(a)||g.isArrayLike(a)){var e=this;h.forEach(a,function(a){e.bindOnce(a,d,c,b)})}};Barge.Event.EventManager.prototype.bindXTimes=function(a,d,c,b,e){b=void 0===b?1:b;e=void 0===e?!1:e;var f=this.EventElement(a).evEl,g=this.EventElement(a).eventCount||
0,h=function(a){g++;g===b&&f.unbind(d,h,e);c(a)};f.bind(d,h,e)};Barge.Event.EventManager.prototype.bindXTimesOnAll=function(a,d,c,b,e){b=void 0===b?1:b;e=void 0===e?!1:e;if((g.isArray(a)||g.isArrayLike(a))&&g.isNumber(b)&&0<b){var f=this;h.forEach(a,function(a){f.bindXTimes(a,d,c,b,e)})}};Barge.Event.EventManager.prototype.bindNTimes=Barge.Event.EventManager.prototype.bindXTimes;Barge.Event.EventManager.prototype.bindNTimesOnAll=Barge.Event.EventManager.prototype.bindXTimesOnAll})(Barge.utils,Barge.Array,
Barge.Object);
